let e=new THREE.Box3(new THREE.Vector3(-10,-10,-10),new THREE.Vector3(10,10,10)),t={};function n(e,n){t["("+e.x+", "+e.y+", "+e.z+")"]=n}function i(e,n){return t["("+e.x+", "+e.y+", "+e.z+")"]}function o(){t={}}let r={},a=function(t,o){let a=this,c=.2,l=1.5*c;if(a.currentPosition=C(e),a.positions=[a.currentPosition],a.object3d=new THREE.Object3D,t.add(a.object3d),o.texturePath)a.material=new THREE.MeshLambertMaterial({map:r[o.texturePath]});else{let e=M(0,16777215),t=new THREE.Color(e).multiplyScalar(.3);a.material=new THREE.MeshPhongMaterial({specular:11140351,color:e,emissive:t,shininess:100})}let s=function(e){let t=new THREE.Mesh(new THREE.SphereGeometry(l,8,8),a.material);t.position.copy(e),a.object3d.add(t)};n(a.currentPosition,a),s(a.currentPosition),a.update=function(){let t,r;a.positions.length>1&&(t=a.positions[a.positions.length-2],r=(new THREE.Vector3).subVectors(a.currentPosition,t)),V(.5)&&r?directionVector=r:(directionVector=new THREE.Vector3,directionVector[b("xyz")]+=b([1,-1]));let l=(new THREE.Vector3).addVectors(a.currentPosition,directionVector);e.containsPoint(l)&&(i(l)||(n(l,a),r&&!r.equals(directionVector)&&(V(o.teapotChance)?function(e){let t=new THREE.Mesh(new THREE.TeapotBufferGeometry(.30000000000000004,!0,!0,!0,!0,!0),a.material);t.position.copy(e),t.rotation.x=Math.floor(y(0,50))*Math.PI/2,t.rotation.y=Math.floor(y(0,50))*Math.PI/2,t.rotation.z=Math.floor(y(0,50))*Math.PI/2,a.object3d.add(t)}(a.currentPosition):V(o.ballJointChance)?s(a.currentPosition):function(e,t,n){let i=new THREE.Mesh(new THREE.SphereGeometry(c,8,8),a.material);i.position.copy(e),a.object3d.add(i)}(a.currentPosition)),function(e,t,n){let i=(new THREE.Vector3).subVectors(t,e),o=new THREE.ArrowHelper(i.clone().normalize(),e),r=new THREE.CylinderGeometry(c,c,i.length(),10,4,!0),l=new THREE.Mesh(r,n);l.rotation.setFromQuaternion(o.quaternion),l.position.addVectors(e,i.multiplyScalar(.5)),l.updateMatrix(),a.object3d.add(l)}(a.currentPosition,l,a.material),a.currentPosition=l,a.positions.push(l)))}},c="elbow",l="ball",s="mixed",d="cycle",u=[],h={multiple:!0,texturePath:null,joints:s,interval:[16,24]},E=document.getElementById("canvas-container"),w=document.getElementById("canvas-2d"),p=w.getContext("2d"),m=document.getElementById("canvas-webgl"),H=new THREE.WebGLRenderer({alpha:!0,antialias:!0,canvas:m});H.setSize(window.innerWidth,window.innerHeight);let T=new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,1,1e5),R=new THREE.Scene,x=new THREE.AmbientLight(1118481);R.add(x);let f=new THREE.DirectionalLight(16777215,.9);function g(){if(h.texturePath&&!r[h.texturePath]){let e=THREE.ImageUtils.loadTexture(h.texturePath);e.wrapS=e.wrapT=THREE.RepeatWrapping,e.repeat.set(2,2),r[h.texturePath]=e}for(let e=0;e<u.length;e++)u[e].update(R);if(0===u.length){let e=h.joints;h.joints===d&&(e=jointsCycleArray[jointsCycleIndex++]);let t={teapotChance:.005,ballJointChance:e===l?1:e===s?1/3:0,texturePath:h.texturePath};if(V(.05)&&(t.teapotChance=.05,t.texturePath="images/textures/candycane.png",!r[t.texturePath])){let e=THREE.ImageUtils.loadTexture(t.texturePath);e.wrapS=e.wrapT=THREE.RepeatWrapping,e.repeat.set(2,2),r[t.texturePath]=e}for(let e=0;e<1+h.multiple*(1+V(.1));e++)u.push(new a(R,t))}w.width===window.innerWidth&&w.height===window.innerHeight||(w.width=window.innerWidth,w.height=window.innerHeight),drawing&&(H.render(R,T),requestAnimationFrame(g))}function P(){if(V(.5))T.position.set(0,0,14);else{let e=new THREE.Vector3(14,0,0),t=new THREE.Vector3(y(-1,1),y(-1,1),y(-1,1)),n=Math.PI/2,i=(new THREE.Matrix4).makeRotationAxis(t,n);e.applyMatrix4(i),T.position.copy(e)}let e=new THREE.Vector3(0,0,0);T.lookAt(e)}function y(e,t){return Math.random()*(t-e)+e}function M(e,t){return Math.round(y(e,t))}function V(e){return Math.random()<e}function b(e){return e[Math.floor(Math.random()*e.length)]}function j(e){for(let t=e.length-1;t>0;t--){let n=Math.floor(Math.random()*(t+1)),i=e[t];e[t]=e[n],e[n]=i}}function C(e){return new THREE.Vector3(M(e.min.x,e.max.x),M(e.min.y,e.max.y),M(e.min.z,e.max.z))}f.position.set(-1.2,1.5,.5),R.add(f),P(),addEventListener("resize",(function(){H.setSize(window.innerWidth,window.innerHeight),T.aspect=window.innerWidth/window.innerHeight,T.updateProjectionMatrix()}),!1),drawing=!0,setTimeout((()=>{drawing=!1}),5e3),g();